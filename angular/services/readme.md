# Primer on AngularJS Service Types

Much to my surprise, the Angular [documentation](https://docs.angularjs.org/guide/services) provides a great of services: 

> Angular services are substitutable objects that are wired together using dependency injection (DI). You can use services to organize and share code across your app.

> Angular services are:

> 1. Lazily instantiated – Angular only instantiates a service when an application component depends on it.
> 1. Singletons – Each component dependent on a service gets a reference to the single instance generated by the service factory.

> Angular offers several useful services (like $http), but for most applications you'll also want to create your own.

Services are powerful in that they help keep your code DRY by encapsulating functionlity. Simply from an architecture stanpoint, services help seperate concerns, ensuring that each object is responsible for a single piece of functionality. For example, it's common for beginners to put *all* of their app's functionality into the controller. This if fine for smaller apps, but just know that it's not a good practice and your controller will balloon quickly as your app scales. 

Get in the habit early to seperate concerns. If you're controller is handling more than just defining the scope or initial state of your app, connecting your models and views, then you are *probably* doing too much.

We are all guilty of this:

```javascript
app.controller('earningsController', function($scope, $http) {

  var getData = function() {
    $http.get('/api/v1/earnings')
    .success(function(items) {
      console.log(items)
      $scope.items = items;
    })
    .error(function(items) {
      console.log('Error: ' + items);
    });
  };

  var init = function() {

    // totals
    $scope.mealData = {};
    $scope.charges = {};

    // total values
    $scope.charges.subtotal = 0;
    $scope.charges.tip = 0;
    $scope.charges.total = 0;
    $scope.submitted = false;
  };

  // call init(), getData() functions
  init(); 
  getData();

  // compute totals
  var compute = function() {

    // total per customer
    $scope.charges.subtotal = ($scope.mealData.mealPrice * (1 + $scope.mealData.taxRate/100));
    $scope.charges.tip = $scope.charges.subtotal * $scope.mealData.tipRate/100;
    $scope.charges.total = $scope.charges.subtotal + $scope.charges.tip;

    // post request
    $http.post(
      '/api/v1/earnings',
      JSON.stringify($scope.mealData),
      {'Content-Type': 'application/json'}
    )
    .success(function(data) {
      console.log(data)
      getData();
    });
  };

  // validate data
  $scope.validate = function() {
    if($scope.mealForm.$valid) {
      compute();  // run form validation before computing totals
    }
  }

  // clear input fields
  $scope.clear = function() {
    $scope.mealData = {};
    $scope.charges = {"subtotal":0,"tip":0,"total":0}
    $scope.submitted = false;
  }

});
```

Yes, I wrote this code. (Mantra: *I am not my code*) Not only am I defining scope - but also making an API call, consuming data, calculating totals, handling validation, and so forth, all in the controller. Too much is happening in the controller, it's not DRY, and if I continue writing code like this in my controller, the app will become unmanageable very quickly.

This is where services come into play. 





